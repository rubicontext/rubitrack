{% extends 'admin/base_site.html' %}
{% block title %}Create Manual Transition{% endblock title %}
{% block content %}
<h1>Create manual transition</h1>
{% if message %}
    <div class="alert alert-success">{{ message }}</div>
{% endif %}
<form method="post">
    {% csrf_token %}
    <div class="form-group">
        <label for="track1_id">Track 1 :</label>
        <select name="track1_id" class="form-control" required>
            <option value="">-- Choisir --</option>
            {% for track in tracks %}
                <option value="{{ track.id }}">{{ track.title }} ({{ track.artist.name }})</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <label for="track2_id">Track 2 :</label>
        <select name="track2_id" class="form-control" required>
            <option value="">-- Choisir --</option>
            {% for track in tracks %}
                <option value="{{ track.id }}">{{ track.title }} ({{ track.artist.name }})</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <label for="direction">Sens de la transition :</label>
        <select name="direction" class="form-control" required>
            <option value="right">Track 1 → Track 2</option>
            <option value="left">Track 2 → Track 1</option>
        </select>
    </div>
    <div class="form-group">
        <label for="comment">Commentaire :</label>
        <input type="text" name="comment" class="form-control" />
    </div>
    <button type="submit" class="btn btn-primary" style="background-color:#283C4F; color:white; border:none;">Enregistrer la transition</button>
</form>

<hr style="margin:40px 0;"/>
<div style="margin-top:10px; padding:15px; background:#f8f9fa; border:1px solid #e0e4e7; border-radius:6px; max-width:520px;">
    <h3 style="margin-top:0; font-size:20px;">Go to a track history</h3>
    <form id="jump-history-form" method="get" action="" onsubmit="return jumpToHistory();">
        <p style="margin-bottom:12px;">
            <label for="jumpTrackSelect" style="font-weight:600;">Track A:</label><br/>
            <select id="jumpTrackSelect" class="form-control" required style="max-width:100%;">
                <option value="">-- Choisir --</option>
                {% for track in tracks %}
                  <option value="{{ track.id }}">{{ track.title }} ({{ track.artist.name }})</option>
                {% endfor %}
            </select>
        </p>
        <p style="margin:0;">
            <button type="submit" class="btn btn-success" style="background:#52d3aa; border:none;">View history</button>
        </p>
    </form>
</div>
<script>
function jumpToHistory(){
  var sel = document.getElementById('jumpTrackSelect');
  if(!sel.value){return false;}
  window.location.href = '/track/history_editing/' + sel.value;
  return false;
}
</script>
{% endblock %}
