{% extends "admin/base_site.html" %}
 
{% block title %}Now Playing - Tonial{% endblock title %}
  
  {% block content %}

<h2><div class="grey_subtitle">Now Playing: </div></h2>
<div class='now_playing_track' id='currentlyPlayingTrackBlock'>
  <div class="row">
    <div class="track_big_blue" >
       {{ currentTrack.title }}  
    </div>

    <div class="green_flashy">- {{ currentTrack.artist.name }}</div>
    
     <div class="green_flashy">
       
    </div>
     <div class="grey_subtitle">
      Genre: {{ currentTrack.genre.name }}  - {{ currentTrack.bpm|floatformat}} bpm
    </div>
  </div>
</div>

<hr>
<hr>
<hr>

<h2>Playlist History: </h2>
<table id="_appendHere" class="table table-striped table-condensed">
  <tr>
    <th>Track Title</th>
    <th>Artist</th>
    <th>Genre</th>
    <th>BPM</th>
    <th colspan=2 style="text-align: center">Transition Rating?</th>
    <th>Time played</th>
  </tr>
  {% for currentPlay in playlistHistory %}
    <tr>                    


     <td>{{ currentPlay.track.title }}</td>
     <td>{{ currentPlay.track.artist.name }}</td>
     <td>{{ currentPlay.track.genre.name }}</td>
     <td>{{ currentPlay.track.bpm|floatformat}}</td>
     <td class="good_transition">Good</td>
     <td class="bad_transition">Poor</td>
     <td>{{ currentPlay.date_played }}</td>
  </tr>
  {% endfor %}
</table>





<hr>
<hr>
<hr>

<h2>Suggestions: </h2>
<div id='suggestionsBlock'>
  <h3>Related tracks based on your manual input: </h3>
    <p class="success">
       track1
       track2
    </p>

  <h3>Related tracks based on our algorithm:</h3>
    <p class="success">
       track1
       track2
    </p>

    <h3>Most played tracks after this one: </h3>
    <p class="success">
      lala
      lili
    </p>

    <h3>In the same musical genre : </h3>
    <p class="success">
      lala
      lili
    </p>

  <h3>Tracks and Remixes from the same artist : </h3>
  <p class="success">
    lala
    lili
  </p>
</div>

<script>
    var append_increment = 0;
    setInterval(function() {
        $.ajax({
            type: "GET",
            url: '../get_more_played_history_row',  // URL to your view that serves new info
            data: {'append_increment': append_increment}
        })
        .done(function(response) {
            $('#_appendHere').append(response);
            append_increment += 10;
        });

        $.ajax({
          url: '../get_more_currently_playing_title_block',
          success: function(data) {
            $('#currentlyPlayingTitleBlock').html(data); 
          }
        });
        $.ajax({
          url: '../get_more_currently_playing_track_block',
          success: function(data) {
            $('#currentlyPlayingTrackBlock').html(data);
             //$('#currentlyPlayingTrackBlock_second').html(data);             
          }
        });

    }, 10000);


   

</script>

 {% endblock content %}

 